{"ast":null,"code":"import { tap } from 'rxjs';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./user.service\";\nexport class AutenticacaoService {\n  constructor(http, userService) {\n    this.http = http;\n    this.userService = userService;\n    this.apiUrl = environment.apiUrl;\n  }\n  autenticar(email, senha) {\n    return this.http.post(`${this.apiUrl}/auth/login`, {\n      email,\n      senha\n    }, {\n      observe: 'response'\n    }).pipe(tap(response => {\n      const authToken = response.body?.access_token || '';\n      this.userService.salvarToken(authToken);\n    }));\n  }\n}\nAutenticacaoService.ɵfac = function AutenticacaoService_Factory(t) {\n  return new (t || AutenticacaoService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.UserService));\n};\nAutenticacaoService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AutenticacaoService,\n  factory: AutenticacaoService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAAqBA,GAAG,QAAQ,MAAM;AACtC,SAASC,WAAW,QAAQ,8BAA8B;;;;AAU1D,OAAM,MAAOC,mBAAmB;EAI9BC,YACUC,IAAgB,EAChBC,WAAwB;IADxB,SAAI,GAAJD,IAAI;IACJ,gBAAW,GAAXC,WAAW;IAJb,WAAM,GAAWJ,WAAW,CAACK,MAAM;EAKxC;EAEHC,UAAU,CAACC,KAAa,EAAEC,KAAa;IACrC,OAAO,IAAI,CAACL,IAAI,CAACM,IAAI,CACnB,GAAG,IAAI,CAACJ,MAAM,aAAa,EAC3B;MAAEE,KAAK;MAAEC;IAAK,CAAE,EAChB;MAAEE,OAAO,EAAE;IAAU,CAAC,CACvB,CAACC,IAAI,CACJZ,GAAG,CAAEa,QAAQ,IAAI;MACf,MAAMC,SAAS,GAAGD,QAAQ,CAACE,IAAI,EAAEC,YAAY,IAAI,EAAE;MACnD,IAAI,CAACX,WAAW,CAACY,WAAW,CAACH,SAAS,CAAC;IACzC,CAAC,CAAC,CACH;EACH;;AApBWZ,mBAAmB;mBAAnBA,mBAAmB;AAAA;AAAnBA,mBAAmB;SAAnBA,mBAAmB;EAAAgB,SAAnBhB,mBAAmB;EAAAiB,YAFlB;AAAM","names":["tap","environment","AutenticacaoService","constructor","http","userService","apiUrl","autenticar","email","senha","post","observe","pipe","response","authToken","body","access_token","salvarToken","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\55989\\Documents\\Projetos-WEB\\Angular\\angular-movie-listing-main\\src\\app\\core\\services\\autenticacao.service.ts"],"sourcesContent":["import { HttpClient, HttpResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, tap } from 'rxjs';\nimport { environment } from 'src/environments/environment';\nimport { UserService } from './user.service';\n\ninterface AuthResponse {\n  access_token: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AutenticacaoService {\n\n  private apiUrl: string = environment.apiUrl;\n\n  constructor(\n    private http: HttpClient,\n    private userService: UserService\n  ) {}\n\n  autenticar(email: string, senha: string): Observable<HttpResponse<AuthResponse>> {\n    return this.http.post<AuthResponse>(\n      `${this.apiUrl}/auth/login`,\n      { email, senha },\n      { observe: 'response'}\n    ).pipe(\n      tap((response) => {\n        const authToken = response.body?.access_token || '';\n        this.userService.salvarToken(authToken);\n      })\n    );\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}